{% load static %}
{% include 'v_base.html' %}

<body>

<div class="main-container">
    <div class="dashboard-container">

        <!-- Sidebar -->
        {% include 'includes/v_sidebar.html' %}

        <!-- Main Content -->
        <div class="content">

            <!-- Top Bar -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-bold mb-0">Dashboard</h3>
                <a href="{% url 'home' %}" class="text-decoration-none fw-semibold">
                    Back to Home
                </a>
            </div>


            <!-- Overview Section -->
            <div class="card p-4 shadow-sm mb-4">
                <h5 class="text-uppercase fw-bold mb-3">Overview</h5>

                <div class="row g-3">

                    <!-- Total Orders -->
                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header fw-semibold">Total Orders</div>
                            <div class="card-body text-center">
                                <h4 class="fw-bold">{{ orders_count }}</h4>
                            </div>
                        </div>
                    </div>

                    <!-- Total Revenue -->
                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header fw-semibold">Total Revenue</div>
                            <div class="card-body text-center">
                               <h4 class="fw-bold">₹{{ total_revenue|floatformat:2 }}</h4>
                            </div>
                        </div>
                    </div>

                    <!-- Monthly Revenue -->
                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header fw-semibold">This Month</div>
                            <div class="card-body text-center">
                                <h4 class="fw-bold">₹{{ current_month_revenue|floatformat:2 }}</h4>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Recent Orders Section -->
            <div class="card p-4 shadow-sm">

                <h5 class="fw-bold mb-3">Recent Orders</h5>

                <div class="table-responsive">
                    <table class="table table-hover table-bordered align-middle text-center shadow-sm" id="datatable">

                        <thead class="table-light">
                            <tr>
                                <th>Order #</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for orders in recent_orders %}
                            <tr>
                                <td class="fw-semibold">{{ orders.order_number }}</td>
                                <td>{{ orders.first_name }}</td>
                                <td>{{ orders.phone }}</td>
                                <td>₹{{ orders.total }}</td>
                                <td>{{ orders.status }}</td>
                                <td>{{ orders.created_at|date:"d F Y" }}</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-primary">Details</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>
                </div>

            </div> <!-- End Recent Orders -->

        </div> <!-- End Content -->

    </div> <!-- End Dashboard Container -->
</div> <!-- End Main Container -->


<!-- JS -->
<script src="{% static 'js/modernizr.js' %}"></script>
<script src="{% static 'js/bootstrap.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>

</body>
</html>
