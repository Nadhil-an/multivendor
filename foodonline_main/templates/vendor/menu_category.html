{% load static %}
{% include 'v_base.html' %}

<body>

<div class="main-container">

    <div class="dashboard-container">

        <!-- Sidebar -->
        {% include 'includes/v_sidebar.html' %}

        <!-- RIGHT CONTENT -->
        <div class="content">

            <!-- TOP BAR -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-bold mb-0">Dashboard</h3>
                <a href="{% url 'home' %}" class="text-decoration-none fw-semibold">
                    Back to Home
                </a>
            </div>


            <!-- MAIN CARD -->
            <div class="card p-4 shadow-sm mb-4">

                <!-- ACTION BUTTONS -->
                <div class="d-flex justify-content-between mb-3">
                    <button class="btn btn-secondary btn-sm"
                            onclick="window.history.back()">
                        <i class="fa fa-angle-left"></i> Back
                    </button>

                    <a href="{% url 'addfood' %}" class="btn btn-success btn-sm px-3">
                        <i class="fa fa-plus"></i> Add Food
                    </a>
                </div>

                {% if fooditems %}
                <h5 class="fw-bold mb-2">Food List</h5>
                <p class="text-muted mb-3">Manage all food items under this category.</p>
                <hr>

                <!-- TABLE -->
                <div class="table-responsive">
                    <table class="table align-middle border-0 borderless-table">

                        <tbody>
                            {% for food in fooditems %}
                            <tr class="table-row">

                                <!-- INDEX -->
                                <td width="50px" class="fw-semibold text-secondary">
                                    {{ forloop.counter }}
                                </td>

                                <!-- IMAGE -->
                                <td width="60px">
                                    <img src="{{ food.image.url }}" 
                                         width="45" height="45"
                                         class="rounded"
                                         style="object-fit: cover;">
                                </td>

                                <!-- FOOD INFO -->
                                <td>
                                    <p class="fw-bold mb-1">{{ food }}</p>
                                    <small class="text-muted">{{ food.description }}</small>
                                </td>

                                <!-- AVAILABILITY -->
                                <td width="150px">
                                    {% if food.is_available %}
                                        <span class="badge bg-success px-3 py-2">Available</span>
                                    {% else %}
                                        <span class="badge bg-danger px-3 py-2">Out of Stock</span>
                                    {% endif %}
                                </td>

                                <!-- ACTION BUTTONS -->
                                <td width="100px" class="text-end">

                                    <a href="{% url 'edit_food' food.id %}" 
                                       class="text-primary me-2" title="Edit">
                                        <i class="fa-solid fa-pen-to-square"></i>
                                    </a>

                                    <a href="{% url 'delete_food' food.id %}" 
                                       class="text-danger"
                                       onclick="return confirm('Are you sure you want to delete this item?');"
                                       title="Delete">
                                        <i class="fa-solid fa-trash"></i>
                                    </a>

                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>
                </div>

                {% else %}

                <!-- EMPTY STATE -->
                <div class="text-center my-5">
                    <img src="{% static 'images/empty.png' %}"
                         width="120" class="opacity-75 mb-3">
                    <h5 class="fw-bold">No Food Items Found</h5>
                    <p class="text-muted">Add your first food item to this category.</p>

                    <a href="{% url 'addfood' %}" class="btn btn-success px-4">
                        <i class="fa fa-plus"></i> Add Food
                    </a>
                </div>

                {% endif %}

            </div> <!-- End Card -->

        </div> <!-- End Content -->

    </div> <!-- End Dashboard-container -->

</div> <!-- End Main-container -->


<!-- Extra Table Styling -->
<style>
    /* Removes all borders */
    .borderless-table,
    .borderless-table * {
        border: none !important;
    }

    /* Clean modern spacing */
    .borderless-table td {
        padding: 14px 10px;
    }

    /* Hover effect */
    .borderless-table tr:hover {
        background: #f5f6f8;
        transition: 0.2s ease;
    }

    /* Remove shadow lines from Bootstrap */
    table.table {
        border-collapse: separate !important;
        border-spacing: 0 6px !important; /* spacing between rows */
    }
</style>

</body>
</html>
