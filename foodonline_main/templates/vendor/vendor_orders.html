{% load static %}
{% include 'v_base.html' %}

<body>

<div class="main-container">
    <div class="dashboard-container">

        <!-- Sidebar -->
        {% include 'includes/v_sidebar.html' %}

        <!-- RIGHT CONTENT -->
        <div class="content">

            <!-- TOP BAR -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-bold">Recent Orders</h3>

                <a href="#">
                    <img src="{{ vendor.user_profile.profile_picture.url }}"
                         width="35" height="35"
                         class="rounded-circle"
                         style="object-fit: cover;">
                </a>
            </div>

            <!-- MAIN CARD -->
            <div class="card p-4 shadow-sm">

                <h5 class="fw-bold mb-3">Orders Overview</h5>
                <hr>

                <div class="table-responsive">

                    <table class="table table-hover table-bordered align-middle text-center shadow-sm" id="datatable">

                        <thead class="table-light">
                            <tr>
                                <th>Order #</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for order in order %}
                            <tr>
                                <!-- Order Number -->
                                <td class="fw-semibold">
                                    <a href="{% url 'vendor_order_details' order.order_number %}" class="text-decoration-none">
                                        {{ order.order_number }}
                                    </a>
                                </td>

                                <!-- Name -->
                                <td>{{ order.name }}</td>

                                <!-- Phone -->
                                <td>{{ order.phone }}</td>

                                <!-- Total -->
                                <td>â‚¹{{ order.get_total_by_vendor.grand_total }}</td>

                                <!-- Status with BADGE -->
                                <td>
                                    {% if order.status == "Delivered" %}
                                        <span class="badge bg-success px-3 py-2">Delivered</span>
                                    {% elif order.status == "Pending" %}
                                        <span class="badge bg-warning text-dark px-3 py-2">Pending</span>
                                    {% elif order.status == "Cancelled" %}
                                        <span class="badge bg-danger px-3 py-2">Cancelled</span>
                                    {% else %}
                                        <span class="badge bg-success px-3 py-2">{{ order.status }}</span>
                                    {% endif %}
                                </td>

                                <!-- Date -->
                                <td>{{ order.created_at|date:"d F Y" }}</td>

                                <!-- Action -->
                                <td>
                                    <a href="{% url 'vendor_order_details' order.order_number %}" 
                                       class="btn btn-primary btn-sm px-3">
                                        Details
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>

                </div>
            </div>

        </div> <!-- END CONTENT -->

    </div> <!-- END DASHBOARD-CONTAINER -->
</div> <!-- END MAIN-CONTAINER -->

</body>
</html>
